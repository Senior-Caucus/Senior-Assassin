{% extends "base.html" %}

{% block title %}Target{% endblock %}

{% block content %}
  <div class="target-page">
    <h2 class="nosifer-regular">Select a User</h2>
    <button id="rules-btn">Instructions/Rules v3</button>
    <div style="margin-bottom: 1em; font-size: 1.2em;">
      <b>Your Hearts:</b> {{ users | selectattr('email', 'equalto', user_email) | map(attribute='hearts') | list | first | default('0') }}❤
    </div>
    <select id="user-select">
      {% for user in users|sort(attribute='fullName') %}
        <option value="{{ user.email }}">{{ user.fullName }} ({{ user.hearts|default('0') }}❤)</option>
      {% endfor %}
    </select>
    <button id="show-user-info" style="margin-left: 1em;">Show User Info</button>
    <div id="user-info" style="margin-top:1em;"></div>
  </div>

  <div id="target-profile-pic-reroute">
    <p><a href="/profile">Change Profile Picture</a></p>
  </div>

  <div class="footer-spacer" style="display:none;"></div>
{% endblock %}

{% block scripts %}
<script type="application/javascript">
// Safely inject JSON using backticks for template literals
var ALL_USERS = JSON.parse(`{{ users|tojson|safe }}`);
var EVIDENCE = JSON.parse(`{{ evidence|tojson|safe }}`);
var CURRENT_USER_EMAIL = "{{ user_email }}";
</script>
<script src="/static/js/target.js"></script>
<!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-076DG6NV1N"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-076DG6NV1N');
  </script>
{% endblock %}