{% extends "base.html" %}

{% block title %}Target{% endblock %}

{% block content %}
  <div class="target-page">
    <h2 class="nosifer-regular">Eliminate Anyone</h2>
    <button id="rules-btn">Instructions/Rules v3</button>
    <div style="margin-bottom: 1em; font-size: 1.2em; display: flex; align-items: center; justify-content: center; gap: 0.5em;">
      <b>Your Hearts:</b>
      <span id="my-hearts" style="display: flex; align-items: center; gap: 0.15em;"></span>
      <span id="my-hearts-num"></span>
    </div>
    <div style="display: flex; flex-direction: column; align-items: center; width: 100%;">
      <div id="user-select-wrapper" style="display: flex; align-items: center; gap: 0.5em;">
        <!-- Custom dropdown will be rendered here by JS -->
        <div id="custom-user-dropdown" tabindex="0" style="position: relative; min-width: 250px;"></div>
        <span id="dropdown-hearts" style="display: flex; align-items: center; gap: 0.1em;"></span>
        <span id="dropdown-hearts-num"></span>
      </div>
      <button id="show-user-info" style="margin: 1em auto 0 auto;">Show User Info</button>
    </div>
    <div id="user-info" style="margin-top:1em; display: flex; flex-direction: column; align-items: center;"></div>
  </div>

  <div id="target-profile-pic-reroute">
    <p><a href="/profile">Change Profile Picture</a></p>
  </div>

  <div class="footer-spacer" style="display:none;"></div>
{% endblock %}

{% block scripts %}
<script type="application/javascript">
// Safely inject JSON using backticks for template literals
var ALL_USERS = JSON.parse(`{{ users|tojson|safe }}`);
var EVIDENCE = JSON.parse(`{{ evidence|tojson|safe }}`);
var CURRENT_USER_EMAIL = "{{ user_email }}";
var HEART_IMG_PATHS = {
  '1': '/static/images/hearts/oneheart.png',
  '1/3': '/static/images/hearts/thirdheart.png',
  '2/3': '/static/images/hearts/twothirdheart.png'
};
</script>
<script src="/static/js/target.js"></script>
<!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-076DG6NV1N"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-076DG6NV1N');
  </script>
{% endblock %}