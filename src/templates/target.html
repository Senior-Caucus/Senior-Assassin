{% extends "base.html" %}

{% block title %}Target{% endblock %}

<!--     return templates.TemplateResponse("target.html", {"request": request,
                                                        "target_email": target_email,
                                                        "target_name": target_name,
                                                        "target_picture": target_picture,
                                                        "target_height": target_height,
                                                        "target_schedule": target_schedule}) -->

{% block content %}
  <div class="target-page">
    <h2 class="nosifer-regular">TARGET: {{ target_name }}</h2>
    <div class="target-info">
      <p><strong>Height:</strong> {{ target_height }}</p>
      <p><strong>Schedule:</strong></p>
      <!-- schedule contains comma delimited values representing period 1, 2, 3, etc -->
      <!-- let's make a table with period and class as the header -->
      <table>
        <thead>
          <tr>
            <th>Period</th>
            <th>Class</th>
          </tr>
        </thead>
        <tbody>
          {% for period, class_name in target_schedule.items() %}
            <tr>
              <td>{{ period }}</td>
              <td>{{ class_name }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    
    <div class="target-image">
      <!-- picture is an io.bytesIO object -->
      {% if target_picture %}
        <img src="data:image/jpeg;base64,{{ target_picture }}" alt="Target Picture">
      {% else %}
        <p>No picture available</p>
      {% endif %}
    </div>

    <button id="open-evidence" class="action-btn">Submit Evidence</button>

    <!-- Modal Form -->
    <div id="evidence-modal" class="modal hidden">
      <div class="modal-content">
        <button class="close-btn">&times;</button>
        <h3>Submit Evidence</h3>
        <form action="/submit-evidence" method="post" enctype="multipart/form-data">
          <label for="video">Video Evidence (max 25MB):</label>
          <input type="file" name="video" id="video" accept="video/*" required>

          <label for="comments">Comments:</label>
          <textarea name="comments" id="comments" rows="4" placeholder="Optional..."></textarea>

          <button type="submit" class="submit-btn">Submit</button>
        </form>
      </div>
    </div>

    <!-- Rules Toggle -->
    <button id="rules-btn">Rules</button>
  </div>
{% endblock %}

{% block scripts %}
<script src="/static/js/target.js"></script>
{% endblock %}